<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gratitude Challenge – Claim Reward | Excellyte</title>
  <meta name="description" content="Claim your Excellyte Gratitude Challenge reward. Submit your handle and dates for verification.">
  <style>
    :root{
      --blue:#1E3A8A; --green:#16A34A; --orange:#F59E0B; --ink:#0f172a; --muted:#475569; --bg:#ffffff; --line:#e2e8f0;
      --radius:16px; --shadow:0 10px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial}
    a{color:var(--blue);text-decoration:none}
    .wrap{max-width:1080px;margin:0 auto;padding:0 16px}
    header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--line);z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:36px;height:36px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--blue);color:#fff;padding:12px 18px;border-radius:12px;font-weight:600;box-shadow:var(--shadow)}
    .btn:hover{background:#152b67}
    h1{font-size:clamp(26px,4.6vw,38px);line-height:1.15;margin:0 0 8px}
    h2{font-size:clamp(20px,3.4vw,28px);margin:0 0 8px}
    .muted{color:var(--muted)}
    .panel{border:1px solid var(--line);border-radius:var(--radius);padding:22px;background:#fff;box-shadow:var(--shadow)}
    main{padding:44px 0}
    form{display:grid;gap:12px}
    label{font-weight:600}
    input, select, textarea{
      width:100%;padding:12px 14px;border:1px solid var(--line);border-radius:12px;font:inherit;background:#fff
    }
    textarea{min-height:110px;resize:vertical}
    .row{display:grid;gap:12px}
    @media(min-width:760px){.row{grid-template-columns:1fr 1fr}}
    .help{font-size:12px;color:var(--muted);margin-top:4px}
    .note{font-size:12px;color:var(--muted)}
    .success{color:var(--green)}
    .error{color:#b91c1c}
    footer{border-top:1px solid var(--line);padding:18px 0;color:var(--muted);font-size:14px}
    .social{display:flex;gap:14px}
    .social a{color:var(--blue);font-weight:600}
    .kicker{display:inline-block;padding:4px 10px;border-radius:999px;background:#ecfdf5;color:#065f46;border:1px solid #bbf7d0;font-weight:700;font-size:12px;letter-spacing:.3px}
  </style>
</head>
<body>
<header>
  <div class="wrap nav">
    <a class="brand" href="index.html">
      <!-- Logo -->
      <svg class="logo" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Excellyte logo">
        <defs><linearGradient id="g1" x1="0" y1="0" x2="64" y2="64"><stop stop-color="#1E3A8A"/><stop offset="1" stop-color="#16A34A"/></linearGradient></defs>
        <path d="M32 6C32 6 14 24 14 36c0 9.9 8.1 18 18 18s18-8.1 18-18C50 24 32 6 32 6z" fill="url(#g1)"/>
        <circle cx="42" cy="20" r="5" fill="#F59E0B"/>
        <path d="M20 40a10 10 0 0 0 14 10A10 10 0 0 0 20 40z" fill="#FDBA74"/>
      </svg>
      <div>
        <div style="font-weight:800;letter-spacing:-.2px">Excellyte</div>
        <div class="muted" style="font-size:12px;margin-top:-2px">Hydration with Gratitude</div>
      </div>
    </a>
    <a class="btn" href="index.html#signup">Get Early Access</a>
  </div>
</header>

<main>
  <div class="wrap">
    <div class="panel" style="margin-bottom:16px">
      <span class="kicker">Gratitude Challenge</span>
      <h1>Claim Your Free 30-Serving Pouch</h1>
      <p class="muted" style="max-width:820px">
        Finished your 30-day streak? Awesome. Submit your details below so we can verify your posts and get your reward shipped.
      </p>
    </div>

    <!-- CLAIM FORM -->
    <div class="panel">
      <h2 style="margin-bottom:8px">Submission Details</h2>
      <form id="claim-form" action="https://formspree.io/f/xeolkblb" method="POST" novalidate>
        <!-- Contact -->
        <div class="row">
          <div>
            <label for="email">Email (for confirmation)</label>
            <input id="email" name="email" type="email" placeholder="you@example.com" required />
          </div>
          <div>
            <label for="platform">Platform</label>
            <select id="platform" name="platform" required>
              <option value="" disabled selected>Select platform</option>
              <option>TikTok</option>
              <option>Instagram</option>
              <option>YouTube</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="handle">@Handle</label>
            <input id="handle" name="handle" type="text" placeholder="@excellyte_hydration" required />
            <div class="help">Use your exact public handle so we can find your posts.</div>
          </div>
          <div>
            <label for="profileUrl">Profile URL</label>
            <input id="profileUrl" name="profile_url" type="url" placeholder="https://tiktok.com/@yourname" required />
          </div>
        </div>

        <!-- Dates -->
        <div class="row">
          <div>
            <label for="start">Streak Start Date</label>
            <input id="start" name="streak_start" type="date" required />
          </div>
          <div>
            <label for="end">Streak End Date</label>
            <input id="end" name="streak_end" type="date" required />
          </div>
        </div>

        <!-- Proof links -->
        <div>
          <label for="playlist">Proof Link (playlist, hashtag page, or sample post)</label>
          <input id="playlist" name="proof_link" type="url" placeholder="https://www.tiktok.com/tag/ExcellyteGratitude" />
          <div class="help">One link is enough (playlist, hashtag page, or a couple of representative posts).</div>
        </div>

        <!-- Confirmations -->
        <div class="panel" style="background:#f7fff9;border:1px dashed #bbf7d0">
          <label style="display:flex;gap:10px;align-items:flex-start">
            <input type="checkbox" name="confirm_30" required />
            <span>I posted <strong>30 daily videos</strong> in a row, sharing 3 things I’m grateful for each day.</span>
          </label>
          <label style="display:flex;gap:10px;align-items:flex-start;margin-top:8px">
            <input type="checkbox" name="confirm_tags" required />
            <span>My posts used <strong>#ExcellyteGratitude</strong> and tagged <strong>@excellyte_hydration</strong> or I can provide proof if private.</span>
          </label>
          <label style="display:flex;gap:10px;align-items:flex-start;margin-top:8px">
            <input type="checkbox" name="shipping_ok" required />
            <span>I understand Excellyte will contact me for a shipping address to send my 30-serving pouch.</span>
          </label>
        </div>

        <!-- Notes -->
        <div>
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" name="notes" placeholder="Anything else we should know? (e.g., private account, missed day and restarted, etc.)"></textarea>
        </div>

        <!-- Honeypot anti-spam -->
        <input type="text" name="website" autocomplete="off" style="position:absolute;left:-5000px;opacity:0" tabindex="-1" aria-hidden="true" />

        <!-- Tracking -->
        <input type="hidden" name="_subject" value="Excellyte Gratitude Challenge Claim" />
        <input type="hidden" name="signup_source" value="Claim Page" />
        <input type="hidden" name="tag" value="Gratitude Challenge Claim" />

        <button id="submitBtn" type="submit" class="btn">Submit Claim</button>
        <p id="formStatus" class="note" style="margin-top:6px;"></p>

        <noscript>
          <p class="note">JavaScript is off, so you’ll see a Formspree confirmation after submit.</p>
        </noscript>
      </form>
      <p class="note" style="margin-top:12px">
        We’ll review within a few business days. If we need anything else, we’ll email you at the address above.
      </p>
    </div>
  </div>
</main>

<footer>
  <div class="wrap" style="display:flex;gap:10px;justify-content:space-between;align-items:center;flex-wrap:wrap">
    <div>© <span id="y"></span> Excellyte. All rights reserved.</div>
    <div class="social">
      <a href="https://tiktok.com/@excellyte_hydration" target="_blank" rel="noopener">TikTok</a>
      <a href="https://instagram.com/excellyte_hydration" target="_blank" rel="noopener">Instagram</a>
      <a href="https://youtube.com/@excellyte_hydration" target="_blank" rel="noopener">YouTube</a>
    </div>
  </div>
</footer>

<script>
  // Year
  document.getElementById('y').textContent = new Date().getFullYear();

  // Basic client-side checks: end >= start
  const startEl = document.getElementById('start');
  const endEl = document.getElementById('end');
  function validDates(){
    if(!startEl.value || !endEl.value) return true;
    return new Date(endEl.value) >= new Date(startEl.value);
  }

  // AJAX submit + smart redirect (Formspree free plan friendly)
  const form = document.getElementById('claim-form');
  const statusEl = document.getElementById('formStatus');
  const btn = document.getElementById('submitBtn');

  // Prefer www during SSL provisioning; fall back to same-origin
  function sameOriginThanks(){
    try{
      const { origin, pathname } = window.location;
      if (pathname.endsWith('/')) return origin + pathname + 'thanks.html?claim=1';
      return origin + pathname.replace(/[^/]*$/, 'thanks.html?claim=1');
    }catch(_){ return null; }
  }
  const CANDIDATE_URLS = [
    'https://www.excellyte.com/thanks.html?claim=1',
    'https://excellyte.com/thanks.html?claim=1',
    sameOriginThanks(),
    // Optional: add your exact GitHub Pages fallback:
    // 'https://YOUR-USERNAME.github.io/YOUR-REPO/thanks.html?claim=1'
  ].filter(Boolean);

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    if(!validDates()){
      statusEl.innerHTML = '<span class="error">End date must be on or after start date.</span>';
      return;
    }

    statusEl.textContent = 'Submitting…';
    btn.disabled = true;

    try {
      const formData = new FormData(form);
      const resp = await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (resp.ok) {
        statusEl.innerHTML = '<span class="success">✅ Claim received! Redirecting…</span>';
        for (const url of CANDIDATE_URLS) {
          try {
            await fetch(url, { method: 'HEAD', mode: 'no-cors' });
            window.location.href = url;
            return;
          } catch (_) {}
        }
        statusEl.innerHTML += ' <span class="note">(If you are not redirected, <a href="thanks.html?claim=1">tap here</a>.)</span>';
      } else {
        statusEl.innerHTML = '<span class="error">Hmm, something went wrong. Please try again.</span>';
        btn.disabled = false;
      }
    } catch (err) {
      statusEl.innerHTML = '<span class="error">Network error. Please check your connection and try again.</span>';
      btn.disabled = false;
    }
  });
</script>
</body>
</html>
